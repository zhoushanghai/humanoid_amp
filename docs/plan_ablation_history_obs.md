# æ¶ˆèå®éªŒè®¡åˆ’ï¼šå†å²å¸§è§‚æµ‹å¯¹è®­ç»ƒçš„å½±å“

**ç›®æ ‡**ï¼šé€æ­¥ç¡®å®šæ˜¯å†å²å¸§çš„å“ªä¸ªç»„æˆéƒ¨åˆ†å¯¼è‡´ `num_actor_observations=2` æ—¶è®­ç»ƒå¤±è´¥ã€‚

**åˆ¤æ–­æ ‡å‡†**ï¼šæ¯ä¸ªå®éªŒè·‘ **3~5 ä¸‡æ­¥**ï¼Œåœ¨ TensorBoard è§‚å¯Ÿï¼š
- `Policy / Standard Deviation`ï¼šæœ‰æ²¡æœ‰**å˜åŒ–**ï¼ˆä¸æ˜¯æ°´å¹³çº¿ï¼‰
- `Reward / Total reward`ï¼šæœ‰æ²¡æœ‰**ä¸Šå‡è¶‹åŠ¿**

---

## è§‚æµ‹ç»„æˆè¯´æ˜

å½“å‰ Actor çš„å•å¸§è§‚æµ‹ï¼ˆ102 ç»´ï¼‰ç”±ä¸‰éƒ¨åˆ†æ„æˆï¼š

| ç¬¦å· | å†…å®¹ | ç»´åº¦ |
|---|---|---|
| **A** | base_actor_obsï¼ˆå…³èŠ‚è§’/è§’é€Ÿåº¦/æ ¹éƒ¨é«˜åº¦/å§¿æ€/çº¿é€Ÿåº¦/è§’é€Ÿåº¦ï¼‰ | 71 |
| **B** | last_actionsï¼ˆä¸Šä¸€æ­¥å…³èŠ‚ä½ç½®æŒ‡ä»¤ï¼‰ | 29 |
| **C** | commandï¼ˆç›®æ ‡é€Ÿåº¦ vx, vyï¼‰ | 2 |

---

## å®éªŒåˆ—è¡¨

### â‘  åŸºçº¿ï¼ˆå¯¹ç…§ç»„ï¼‰

- **å½“å‰å¸§**ï¼šA + B + C
- **å†å²å¸§**ï¼šæ— 
- **observation_space**ï¼š102
- **num_actor_observations**ï¼š1
- **é¢„æœŸ**ï¼šâœ… èƒ½è®­ï¼ˆå·²éªŒè¯ï¼‰
- **ç»“æœè®°å½•**ï¼š
  - Policy Stdï¼šæ­£å¸¸å˜åŒ– âœ…
  - Reward è¶‹åŠ¿ï¼šæ­£å¸¸ä¸Šå‡ âœ…
  - **ç»“è®º**ï¼š[x] èƒ½è®­

---

### â‘¡ åŠ å†å²è¿åŠ¨å­¦ï¼ˆâœ… å·²é€šè¿‡ï¼‰

- **å½“å‰å¸§**ï¼šA + B + Cï¼ˆ102ç»´ï¼Œå›ºå®šå®Œæ•´ï¼‰
- **å†å²å¸§**ï¼šA ä»… base_obsï¼ˆ71ç»´ï¼‰
- **observation_space**ï¼š173
- **num_actor_observations**ï¼š2
- **é…ç½®**ï¼š`history_include_last_actions=False`, `history_include_command=False`
- **é¢„æœŸ**ï¼šæµ‹è¯•å†å²æœ¬èº«æ˜¯å¦å·¥ä½œ
- **Checkpoint**ï¼š`logs/skrl/g1_amp_dance/2026-02-23_17-26-04_ppo_torch/checkpoints/agent_185000.pt`
- **ç»“æœè®°å½•**ï¼š
  - Policy Stdï¼šæ­£å¸¸å˜åŒ–ï¼ˆæœ‰è®­ç»ƒåŠ¨æ€ï¼‰ âœ…
  - Reward è¶‹åŠ¿ï¼šæ˜æ˜¾ä¸Šå‡ âœ…
  - **ç»“è®º**ï¼š[x] èƒ½è®­ / [ ] ä¸èƒ½è®­

---

### â‘¢ åŠ å†å²è¿åŠ¨å­¦ + å†å²åŠ¨ä½œï¼ˆğŸ”„ å½“å‰å®éªŒï¼‰

- **å½“å‰å¸§**ï¼šA + B + C
- **å†å²å¸§**ï¼šA + Bï¼ˆ100 ç»´ï¼‰
- **observation_space**ï¼š202
- **num_actor_observations**ï¼š2
- **é¢„æœŸ**ï¼šæµ‹è¯• last_actions è¿›å…¥å†å²å¸§æ˜¯å¦é€ æˆé—®é¢˜
- **Checkpoint**ï¼š`logs/skrl/g1_amp_dance/_______________/checkpoints/agent______.pt`
- **ç»“æœè®°å½•**ï¼š
  - Policy Stdï¼š
  - Reward è¶‹åŠ¿ï¼š
  - **ç»“è®º**ï¼š[ ] èƒ½è®­ / [ ] ä¸èƒ½è®­

---

### â‘£ å®Œæ•´æ–¹æ¡ˆï¼ˆå½“å‰å¤±è´¥é…ç½®ï¼‰

- **å½“å‰å¸§**ï¼šA + B + C
- **å†å²å¸§**ï¼šA + B + Cï¼ˆ102 ç»´ï¼Œä¸å½“å‰å¸§å®Œå…¨ä¸€è‡´ï¼‰
- **observation_space**ï¼š204
- **num_actor_observations**ï¼š2
- **é¢„æœŸ**ï¼šâŒ å½“å‰å·²çŸ¥å¤±è´¥
- **Checkpoint**ï¼š`logs/skrl/g1_amp_dance/_______________/checkpoints/agent______.pt`
- **ç»“æœè®°å½•**ï¼š
  - Policy Stdï¼šæ°´å¹³çº¿ï¼Œä¸å˜
  - Reward è¶‹åŠ¿ï¼šä¸å¢é•¿
  - **ç»“è®º**ï¼š[x] ä¸èƒ½è®­

---

### â‘¤ å¤‡é€‰ï¼šå»æ‰å†å²å¸§é‡Œçš„ last_actionsï¼ˆè‹¥â‘¢å¤±è´¥ï¼‰

> ä»…åœ¨å®éªŒâ‘¢å¤±è´¥æ—¶æ‰§è¡Œ

- **å½“å‰å¸§**ï¼šA + B + C
- **å†å²å¸§**ï¼šA + Cï¼ˆ73 ç»´ï¼Œå»æ‰ last_actionsï¼‰
- **observation_space**ï¼š175
- **num_actor_observations**ï¼š2
- **é¢„æœŸ**ï¼šæ’æŸ¥ last_actions æ˜¯å¦ä¸ºæ ¹å› 
- **Checkpoint**ï¼š`logs/skrl/g1_amp_dance/_______________/checkpoints/agent______.pt`
- **ç»“æœè®°å½•**ï¼š
  - Policy Stdï¼š
  - Reward è¶‹åŠ¿ï¼š
  - **ç»“è®º**ï¼š[ ] èƒ½è®­ / [ ] ä¸èƒ½è®­

---

### â‘¥ å¤‡é€‰ï¼šå»æ‰å†å²å¸§é‡Œçš„ commandï¼ˆè‹¥â‘¢æˆåŠŸä½†â‘£å¤±è´¥ï¼‰

> ä»…åœ¨å®éªŒâ‘¢æˆåŠŸã€â‘£å¤±è´¥æ—¶æ‰§è¡Œ

- **å½“å‰å¸§**ï¼šA + B + C
- **å†å²å¸§**ï¼šA + Bï¼ˆ100 ç»´ï¼Œå»æ‰ commandï¼‰
- **observation_space**ï¼š202
- **num_actor_observations**ï¼š2
- **é¢„æœŸ**ï¼šæ’æŸ¥ command å†å²æ˜¯å¦ä¸ºæ ¹å› 
- **Checkpoint**ï¼š`logs/skrl/g1_amp_dance/_______________/checkpoints/agent______.pt`
- **ç»“æœè®°å½•**ï¼š
  - Policy Stdï¼š
  - Reward è¶‹åŠ¿ï¼š
  - **ç»“è®º**ï¼š[ ] èƒ½è®­ / [ ] ä¸èƒ½è®­

---

## å†³ç­–æ ‘

```
â‘¡èƒ½è®­ï¼Ÿ
â”œâ”€â”€ å¦ â†’ å†å²å¸§æœºåˆ¶æœ¬èº«æœ‰ Bugï¼ˆæ£€æŸ¥ warm-startã€buffer é€»è¾‘ï¼‰
â””â”€â”€ æ˜¯ â†’ â‘¢èƒ½è®­ï¼Ÿ
           â”œâ”€â”€ å¦ â†’ last_actions è¿›å†å²æ˜¯æ ¹å›  â†’ æ‰§è¡Œâ‘¤ç¡®è®¤
           â””â”€â”€ æ˜¯ â†’ â‘£èƒ½è®­ï¼Ÿ
                      â”œâ”€â”€ æ˜¯ â†’ é—®é¢˜å·²è§£å†³ï¼ˆå¯èƒ½ fixed_log_std ä¿®å¤ç”Ÿæ•ˆï¼‰
                      â””â”€â”€ å¦ â†’ command è¿›å†å²æ˜¯æ ¹å›  â†’ æ‰§è¡Œâ‘¥ç¡®è®¤
```

---

## é…ç½®ä¿®æ”¹å‚è€ƒ

æ¯æ¬¡å®éªŒä¿®æ”¹ `g1_amp_env_cfg.py` ä¸­çš„ `observation_space` å’Œå¯¹åº”çš„ `g1_amp_env.py` ä¸­ `per_frame_parts` æ„å»ºé€»è¾‘ã€‚

**è®­ç»ƒå‘½ä»¤**ï¼š
```bash
conda run -n g1_amp python -m humanoid_amp.train \
  --task Isaac-G1-AMP-Deploy-Direct-v0 \
  --num_envs 4096 \
  --headless
```
